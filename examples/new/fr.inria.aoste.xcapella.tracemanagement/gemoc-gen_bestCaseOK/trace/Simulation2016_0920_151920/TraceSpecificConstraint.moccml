AutomataConstraintLibrary temporalConstraints{
   import 'platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib' as kernel;

   RelationLibrary temporalRelations{

      AutomataRelationDefinition TraceSpecificConstraintDef[TraceSpecificConstraint]{

			variables { 
 				Integer un = 1
 				Integer currentTime = 0
 				Integer timeStamp1 = 0
 				Integer timeStamp2 = 17
 				Integer timeStamp3 = 23
 				Integer timeStamp4 = 27
 				Integer timeStamp5 = 31
 				Integer timeStamp6 = 31
 				Integer timeStamp7 = 40
 				Integer timeStamp8 = 57
 				Integer timeStamp9 = 57
 				Integer timeStamp10 = 61
 				Integer timeStamp11 = 61
 				Integer timeStamp12 = 72
 			}
	           init:  initialState

			from initialState to s1 : s0s1 -> ()

			from s1 to s1 : s1s1 -> ( when TraceSpecificConstraint_phyClock if (currentTime < timeStamp1) do currentTime = (currentTime + un))
				from s1 to s2 : s1s2 -> ( when TraceSpecificConstraint_T2_ACTIVATED, TraceSpecificConstraint_T2_STARTED if (currentTime == timeStamp1) )
				from s1 to s2 : s1s2bis -> ( when TraceSpecificConstraint_T2_ACTIVATED, TraceSpecificConstraint_T2_STARTED, TraceSpecificConstraint_phyClock if (currentTime == (timeStamp1 - un)) do currentTime = (currentTime + un))
				from s1 to s2 : s1s2ter -> ( when TraceSpecificConstraint_phyClock if (currentTime > timeStamp1) do kill(TraceSpecificConstraint_phyClock))

			from s2 to s2 : s2s2 -> ( when TraceSpecificConstraint_phyClock if (currentTime < timeStamp2) do currentTime = (currentTime + un))
				from s2 to s3 : s2s3 -> ( when TraceSpecificConstraint_T2_TERMINATED if (currentTime == timeStamp2)
			)
				from s2 to s3 : s2s3bis -> ( when TraceSpecificConstraint_T2_TERMINATED, TraceSpecificConstraint_phyClock if (currentTime == (timeStamp2 - un)) do currentTime = (currentTime + un))
				from s2 to s3 : s2s3ter -> ( when TraceSpecificConstraint_phyClock if (currentTime > timeStamp2) do kill(TraceSpecificConstraint_phyClock))

			from s3 to s3 : s3s3 -> ( when TraceSpecificConstraint_phyClock if (currentTime < timeStamp3) do currentTime = (currentTime + un))
				from s3 to s4 : s3s4 -> ( when TraceSpecificConstraint_T6_ACTIVATED, TraceSpecificConstraint_T6_STARTED if (currentTime == timeStamp3) )
				from s3 to s4 : s3s4bis -> ( when TraceSpecificConstraint_T6_ACTIVATED, TraceSpecificConstraint_T6_STARTED, TraceSpecificConstraint_phyClock if (currentTime == (timeStamp3 - un)) do currentTime = (currentTime + un))
				from s3 to s4 : s3s4ter -> ( when TraceSpecificConstraint_phyClock if (currentTime > timeStamp3) do kill(TraceSpecificConstraint_phyClock))

			from s4 to s4 : s4s4 -> ( when TraceSpecificConstraint_phyClock if (currentTime < timeStamp4) do currentTime = (currentTime + un))
				from s4 to s5 : s4s5 -> ( when TraceSpecificConstraint_T6_SUSPENDED, TraceSpecificConstraint_T5_ACTIVATED, TraceSpecificConstraint_T5_STARTED if (currentTime == timeStamp4) )
				from s4 to s5 : s4s5bis -> ( when TraceSpecificConstraint_T6_SUSPENDED, TraceSpecificConstraint_T5_ACTIVATED, TraceSpecificConstraint_T5_STARTED, TraceSpecificConstraint_phyClock if (currentTime == (timeStamp4 - un)) do currentTime = (currentTime + un))
				from s4 to s5 : s4s5ter -> ( when TraceSpecificConstraint_phyClock if (currentTime > timeStamp4) do kill(TraceSpecificConstraint_phyClock))

			from s5 to s5 : s5s5 -> ( when TraceSpecificConstraint_phyClock if (currentTime < timeStamp5) do currentTime = (currentTime + un))
				from s5 to s6 : s5s6 -> ( when TraceSpecificConstraint_T5_TERMINATED if (currentTime == timeStamp5)
			)
				from s5 to s6 : s5s6bis -> ( when TraceSpecificConstraint_T5_TERMINATED, TraceSpecificConstraint_phyClock if (currentTime == (timeStamp5 - un)) do currentTime = (currentTime + un))
				from s5 to s6 : s5s6ter -> ( when TraceSpecificConstraint_phyClock if (currentTime > timeStamp5) do kill(TraceSpecificConstraint_phyClock))

			from s6 to s6 : s6s6 -> ( when TraceSpecificConstraint_phyClock if (currentTime < timeStamp6) do currentTime = (currentTime + un))
				from s6 to s7 : s6s7 -> ( when TraceSpecificConstraint_T6_STARTED if (currentTime == timeStamp6) )
				from s6 to s7 : s6s7bis -> ( when TraceSpecificConstraint_T6_STARTED, TraceSpecificConstraint_phyClock
			if (currentTime == (timeStamp6 - un)) do currentTime = (currentTime + un))
				from s6 to s7 : s6s7ter -> ( when TraceSpecificConstraint_phyClock if (currentTime > timeStamp6) do kill(TraceSpecificConstraint_phyClock))

			from s7 to s7 : s7s7 -> ( when TraceSpecificConstraint_phyClock if (currentTime < timeStamp7) do currentTime = (currentTime + un))
				from s7 to s8 : s7s8 -> ( when TraceSpecificConstraint_T2_ACTIVATED, TraceSpecificConstraint_T2_STARTED, TraceSpecificConstraint_T6_SUSPENDED, TraceSpecificConstraint_T7_ACTIVATED if (currentTime == timeStamp7) )
				from s7 to s8 : s7s8bis -> ( when TraceSpecificConstraint_T2_ACTIVATED, TraceSpecificConstraint_T2_STARTED, TraceSpecificConstraint_T6_SUSPENDED, TraceSpecificConstraint_T7_ACTIVATED, TraceSpecificConstraint_phyClock if (currentTime == (timeStamp7 - un)) do currentTime = (currentTime + un))
				from s7 to s8 : s7s8ter -> ( when TraceSpecificConstraint_phyClock if (currentTime > timeStamp7) do kill(TraceSpecificConstraint_phyClock))

			from s8 to s8 : s8s8 -> ( when TraceSpecificConstraint_phyClock if (currentTime < timeStamp8) do currentTime = (currentTime + un))
				from s8 to s9 : s8s9 -> ( when TraceSpecificConstraint_T2_TERMINATED if (currentTime == timeStamp8)
			)
				from s8 to s9 : s8s9bis -> ( when TraceSpecificConstraint_T2_TERMINATED, TraceSpecificConstraint_phyClock if (currentTime == (timeStamp8 - un)) do currentTime = (currentTime + un))
				from s8 to s9 : s8s9ter -> ( when TraceSpecificConstraint_phyClock if (currentTime > timeStamp8) do kill(TraceSpecificConstraint_phyClock))

			from s9 to s9 : s9s9 -> ( when TraceSpecificConstraint_phyClock if (currentTime < timeStamp9) do currentTime = (currentTime + un))
				from s9 to s10 : s9s10 -> ( when TraceSpecificConstraint_T6_STARTED if (currentTime == timeStamp9) )
				from s9 to s10 : s9s10bis -> ( when TraceSpecificConstraint_T6_STARTED, TraceSpecificConstraint_phyClock
			if (currentTime == (timeStamp9 - un)) do currentTime = (currentTime + un))
				from s9 to s10 : s9s10ter -> ( when TraceSpecificConstraint_phyClock if (currentTime > timeStamp9) do kill(TraceSpecificConstraint_phyClock))

			from s10 to s10 : s10s10 -> ( when TraceSpecificConstraint_phyClock if (currentTime < timeStamp10) do currentTime = (currentTime + un))
				from s10 to s11 : s10s11 -> ( when TraceSpecificConstraint_T6_TERMINATED if (currentTime == timeStamp10)
			)
				from s10 to s11 : s10s11bis -> ( when TraceSpecificConstraint_T6_TERMINATED, TraceSpecificConstraint_phyClock if (currentTime == (timeStamp10 - un)) do currentTime = (currentTime + un))
				from s10 to s11 : s10s11ter -> ( when TraceSpecificConstraint_phyClock if (currentTime > timeStamp10) do kill(TraceSpecificConstraint_phyClock))

			from s11 to s11 : s11s11 -> ( when TraceSpecificConstraint_phyClock if (currentTime < timeStamp11) do currentTime = (currentTime + un))
				from s11 to s12 : s11s12 -> ( when TraceSpecificConstraint_T7_STARTED if (currentTime == timeStamp11) )
				from s11 to s12 : s11s12bis -> ( when TraceSpecificConstraint_T7_STARTED, TraceSpecificConstraint_phyClock
			if (currentTime == (timeStamp11 - un)) do currentTime = (currentTime + un))
				from s11 to s12 : s11s12ter -> ( when TraceSpecificConstraint_phyClock if (currentTime > timeStamp11) do kill(TraceSpecificConstraint_phyClock))

			from s12 to s12 : s12s12 -> ( when TraceSpecificConstraint_phyClock if (currentTime < timeStamp12) do currentTime = (currentTime + un))
				from s12 to s13 : s12s13 -> ( when TraceSpecificConstraint_T7_TERMINATED if (currentTime == timeStamp12)
			)
				from s12 to s13 : s12s13bis -> ( when TraceSpecificConstraint_T7_TERMINATED, TraceSpecificConstraint_phyClock if (currentTime == (timeStamp12 - un)) do currentTime = (currentTime + un))
				from s12 to s13 : s12s13ter -> ( when TraceSpecificConstraint_phyClock if (currentTime > timeStamp12) do kill(TraceSpecificConstraint_phyClock))

			from s13 to s14 : s13s14 -> ( if (currentTime > un)                              do kill(TraceSpecificConstraint_T6_ACTIVATED)
                             do kill(TraceSpecificConstraint_T6_STARTED)
                             do kill(TraceSpecificConstraint_T6_SUSPENDED)
                             do kill(TraceSpecificConstraint_T6_TERMINATED)
                             do kill(TraceSpecificConstraint_T7_ACTIVATED)
                             do kill(TraceSpecificConstraint_T7_STARTED)
                             do kill(TraceSpecificConstraint_T7_SUSPENDED)
                             do kill(TraceSpecificConstraint_T7_TERMINATED)
                             do kill(TraceSpecificConstraint_T5_ACTIVATED)
                             do kill(TraceSpecificConstraint_T5_STARTED)
                             do kill(TraceSpecificConstraint_T5_SUSPENDED)
                             do kill(TraceSpecificConstraint_T5_TERMINATED)
                             do kill(TraceSpecificConstraint_T2_ACTIVATED)
                             do kill(TraceSpecificConstraint_T2_STARTED)
                             do kill(TraceSpecificConstraint_T2_SUSPENDED)
                             do kill(TraceSpecificConstraint_T2_TERMINATED)
						)

			State initialState(out: s0s1)

			State s1(
	           		in: s1s1, s0s1
					out : s1s1, s1s2, s1s2bis, s1s2ter
			   )

			State s2(
	           		in: s2s2, s1s2, s1s2bis, s1s2ter
					out : s2s2, s2s3, s2s3bis, s2s3ter
			   )

			State s3(
	           		in: s3s3, s2s3, s2s3bis, s2s3ter
					out : s3s3, s3s4, s3s4bis, s3s4ter
			   )

			State s4(
	           		in: s4s4, s3s4, s3s4bis, s3s4ter
					out : s4s4, s4s5, s4s5bis, s4s5ter
			   )

			State s5(
	           		in: s5s5, s4s5, s4s5bis, s4s5ter
					out : s5s5, s5s6, s5s6bis, s5s6ter
			   )

			State s6(
	           		in: s6s6, s5s6, s5s6bis, s5s6ter
					out : s6s6, s6s7, s6s7bis, s6s7ter
			   )

			State s7(
	           		in: s7s7, s6s7, s6s7bis, s6s7ter
					out : s7s7, s7s8, s7s8bis, s7s8ter
			   )

			State s8(
	           		in: s8s8, s7s8, s7s8bis, s7s8ter
					out : s8s8, s8s9, s8s9bis, s8s9ter
			   )

			State s9(
	           		in: s9s9, s8s9, s8s9bis, s8s9ter
					out : s9s9, s9s10, s9s10bis, s9s10ter
			   )

			State s10(
	           		in: s10s10, s9s10, s9s10bis, s9s10ter
					out : s10s10, s10s11, s10s11bis, s10s11ter
			   )

			State s11(
	           		in: s11s11, s10s11, s10s11bis, s10s11ter
					out : s11s11, s11s12, s11s12bis, s11s12ter
			   )

			State s12(
	           		in: s12s12, s11s12, s11s12bis, s11s12ter
					out : s12s12, s12s13, s12s13bis, s12s13ter
			   )

			State s13(
	           		in: s12s13, s12s13bis,s12s13ter
					out: s13s14
			   )

			State s14(
                            in: s13s14			   )
}

RelationDeclaration	TraceSpecificConstraint(TraceSpecificConstraint_phyClock:clock,TraceSpecificConstraint_T6_ACTIVATED:clock,TraceSpecificConstraint_T6_STARTED:clock,TraceSpecificConstraint_T6_SUSPENDED:clock,TraceSpecificConstraint_T6_TERMINATED:clock,TraceSpecificConstraint_T7_ACTIVATED:clock,TraceSpecificConstraint_T7_STARTED:clock,TraceSpecificConstraint_T7_SUSPENDED:clock,TraceSpecificConstraint_T7_TERMINATED:clock,TraceSpecificConstraint_T5_ACTIVATED:clock,TraceSpecificConstraint_T5_STARTED:clock,TraceSpecificConstraint_T5_SUSPENDED:clock,TraceSpecificConstraint_T5_TERMINATED:clock,TraceSpecificConstraint_T2_ACTIVATED:clock,TraceSpecificConstraint_T2_STARTED:clock,TraceSpecificConstraint_T2_SUSPENDED:clock,TraceSpecificConstraint_T2_TERMINATED:clock)
	           }
}